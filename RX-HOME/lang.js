// Language translations
const translations = {
    ja: {
        // Header
        'nav.features': '特徴',
        'nav.docs': 'ドキュメント',
        'nav.download': 'ダウンロード',
        
        // Hero Section
        'hero.title.main': '動画プレイヤーで世界最速の言語学習',
        'hero.subtitle': '単語の意味、文法、そして究極の視聴体験',
        'hero.badge.size': 'わずか10MB',
        'hero.badge.speed': '爆速起動',
        'hero.badge.free': '完全無料',
        'hero.cta.download': '今すぐダウンロード',
        'hero.cta.learn': '詳しく見る',
        
        // Subtitles Demo
        'subtitle.line1': '字幕1: Hello, World!',
        'subtitle.line2': '字幕2: こんにちは、世界！',
        'subtitle.line3': '字幕3: Hola, Mundo!',
        
        // Features Section
        'features.title': 'RX-01で外国語の学習が加速し続けてもう止まらない',
        'feature1.title': 'トリプル字幕表示',
        'feature1.desc': '最大3つまでの字幕を同時表示。.srtファイルをドロップするだけで簡単に読み込めます。多言語学習に最適。',
        'feature2.title': '瞬間辞書検索',
        'feature2.desc': '字幕内の単語を辞書・発音・文法サイトから一瞬で検索。100種類以上のサイトをプリセット。カスタマイズも自由自在。',
        'feature3.title': 'バレットタイムリープ',
        'feature3.desc': '聞き取れなかった瞬間を最大0.1倍速でスロー再生しながら0.3秒ずつ戻って何度も確認。語学学習はもちろん、マジックやダンスの一瞬の動きも逃さない。くわしく見たい場所のズームも対応。',
        'feature4.title': 'あらゆる形式に対応',
        'feature4.desc': 'mp4, webm, mkv, mov, mp3, wav, flacなど多様な形式をサポート。ローカルファイルもYouTube URLも再生可能。',
        'feature5.title': 'わずか10MBで爆速起動',
        'feature5.desc': 'OSネイティブスピードで瞬時に起動。シークバーホバーでプレビュー表示、豊富なショートカットキーで快適操作。',
        'feature6.title': 'ながら視聴に最適',
        'feature6.desc': 'Picture-in-Picture対応で、動画を見ながら他の作業も可能。マルチタスクを快適にサポート。',
        
        // Platforms Section
        'platforms.title': 'あらゆる環境で',
        'platform.windows': 'Windows版',
        'platform.mac': 'Mac版',
        'platform.visios': 'VisiOS版',
        'platform.visios.desc': 'Chrome拡張機能で動作',
        'platform.nyan8': 'Nyan-8版',
        'platform.nyan8.desc': '学習言語の外国人と一緒に動画を見れる。インストール不要',
        'platforms.note': '全バージョン、全機能が完全無料！広告も無し！',
        
        // Download Section
        'download.title': '今すぐ始めよう',
        'download.subtitle': 'RX-01 Playerで、新しい視聴体験を。初回起動時にWindowsとMacではセキュリティ警告が出ることがあります。',
        'download.install.link': 'インストール方法',
        'download.subtitle.suffix': 'も参照してください。',
        'download.windows': 'Windows版',
        'download.windows.info': 'v0.1.0 - 10MB - Windows 10/11',
        'download.mac': 'Mac版',
        'download.mac.info': 'v0.1.0 - 10MB - macOS 10.15+',
        'download.visios': 'VisiOS版を入手',
        'download.nyan8': 'Nyan-8版を使う',
        
        // Footer
        'footer.brand.desc': '次世代言語学習動画プレイヤー',
        'footer.product': 'プロダクト',
        'footer.features': '特徴',
        'footer.download': 'ダウンロード',
        'footer.docs': 'ドキュメント',
        'footer.support': 'サポート',
        'footer.install': 'インストール方法',
        'footer.contact': 'お問い合わせ',
        'footer.copyright': '© 2026 RX-01 Player. All rights reserved.',
        
        // Docs Page
        'docs.title': 'ドキュメント',
        'docs.subtitle': 'RX-01 Playerの仕様と機能を詳しく解説します',
        'docs.nav.home': 'ホーム',
        'docs.nav.install': 'インストール方法',
        'docs.toc.title': '目次',
        'docs.toc.overview': '概要',
        'docs.toc.versions': 'バージョン比較',
        'docs.toc.formats': '対応ファイル形式',
        'docs.toc.features': '主な機能',
        'docs.toc.shortcuts': 'ショートカット',
        
        // Install Page
        'install.title': 'インストール方法',
        'install.subtitle': 'RX-01 Playerを安全にインストールする方法を解説します',
        'install.toc.title': '目次',
        'install.toc.windows': 'Windows版のインストール方法',
        'install.toc.mac': 'Mac版のインストール方法'
    },
    en: {
        // Header
        'nav.features': 'Features',
        'nav.docs': 'Documentation',
        'nav.download': 'Download',
        
        // Hero Section
        'hero.title.main': 'World\'s Fastest Language Learning with Video Player',
        'hero.subtitle': 'Word meanings, grammar, and the ultimate viewing experience',
        'hero.badge.size': 'Only 10MB',
        'hero.badge.speed': 'Lightning Fast',
        'hero.badge.free': 'Completely Free',
        'hero.cta.download': 'Download Now',
        'hero.cta.learn': 'Learn More',
        
        // Subtitles Demo
        'subtitle.line1': 'Subtitle 1: Hello, World!',
        'subtitle.line2': 'Subtitle 2: こんにちは、世界！',
        'subtitle.line3': 'Subtitle 3: Hola, Mundo!',
        
        // Features Section
        'features.title': 'Accelerate Your Foreign Language Learning with RX-01',
        'feature1.title': 'Triple Subtitle Display',
        'feature1.desc': 'Display up to 3 subtitles simultaneously. Simply drag and drop .srt files to load them easily. Perfect for multilingual learning.',
        'feature2.title': 'Instant Dictionary Lookup',
        'feature2.desc': 'Search words in subtitles instantly from dictionary, pronunciation, and grammar sites. Over 100 preset sites. Fully customizable.',
        'feature3.title': 'Bullet Time Leap',
        'feature3.desc': 'Review missed moments in slow motion (0.1x speed) while rewinding 0.3 seconds at a time. Perfect for language learning, magic tricks, and dance movements. Zoom support included.',
        'feature4.title': 'Support for All Formats',
        'feature4.desc': 'Supports various formats including mp4, webm, mkv, mov, mp3, wav, flac. Play both local files and YouTube URLs.',
        'feature5.title': 'Just 10MB with Lightning Fast Launch',
        'feature5.desc': 'Launches instantly at OS-native speed. Preview on seekbar hover, comfortable operation with rich keyboard shortcuts.',
        'feature6.title': 'Perfect for Multitasking',
        'feature6.desc': 'Picture-in-Picture support allows you to work on other tasks while watching videos. Comfortable multitasking support.',
        
        // Platforms Section
        'platforms.title': 'Available on All Platforms',
        'platform.windows': 'Windows',
        'platform.mac': 'Mac',
        'platform.visios': 'VisiOS',
        'platform.visios.desc': 'Works as Chrome extension',
        'platform.nyan8': 'Nyan-8',
        'platform.nyan8.desc': 'Watch videos with native speakers. No installation required',
        'platforms.note': 'All versions, all features completely free! No ads!',
        
        // Download Section
        'download.title': 'Get Started Now',
        'download.subtitle': 'New viewing experience with RX-01 Player. Security warnings may appear on first launch for Windows and Mac. Please refer to ',
        'download.install.link': 'Installation Guide',
        'download.subtitle.suffix': '.',
        'download.windows': 'Windows',
        'download.windows.info': 'v0.1.0 - 10MB - Windows 10/11',
        'download.mac': 'Mac',
        'download.mac.info': 'v0.1.0 - 10MB - macOS 10.15+',
        'download.visios': 'Get VisiOS Version',
        'download.nyan8': 'Use Nyan-8 Version',
        
        // Footer
        'footer.brand.desc': 'Next-Generation Language Learning Video Player',
        'footer.product': 'Product',
        'footer.features': 'Features',
        'footer.download': 'Download',
        'footer.docs': 'Documentation',
        'footer.support': 'Support',
        'footer.install': 'Installation',
        'footer.contact': 'Contact',
        'footer.copyright': '© 2026 RX-01 Player. All rights reserved.',
        
        // Docs Page
        'docs.title': 'Documentation',
        'docs.subtitle': 'Detailed explanation of RX-01 Player specifications and features',
        'docs.nav.home': 'Home',
        'docs.nav.install': 'Installation',
        'docs.toc.title': 'Table of Contents',
        'docs.toc.overview': 'Overview',
        'docs.toc.versions': 'Version Comparison',
        'docs.toc.formats': 'Supported File Formats',
        'docs.toc.features': 'Main Features',
        'docs.toc.shortcuts': 'Shortcuts',
        
        // Install Page
        'install.title': 'Installation Guide',
        'install.subtitle': 'Learn how to safely install RX-01 Player',
        'install.toc.title': 'Table of Contents',
        'install.toc.windows': 'Windows Installation',
        'install.toc.mac': 'Mac Installation'
    }
};

// Language manager
const LanguageManager = {
    currentLang: 'ja',
    
    // Detect browser language
    detectLanguage() {
        const browserLang = navigator.language || navigator.userLanguage;
        return browserLang.startsWith('ja') ? 'ja' : 'en';
    },
    
    // Get stored language or detect
    getLanguage() {
        const stored = localStorage.getItem('rx01-lang');
        if (stored && (stored === 'ja' || stored === 'en')) {
            return stored;
        }
        return this.detectLanguage();
    },
    
    // Set language
    setLanguage(lang) {
        if (lang !== 'ja' && lang !== 'en') return;
        this.currentLang = lang;
        localStorage.setItem('rx01-lang', lang);
        document.documentElement.lang = lang;
        this.updatePageContent();
        this.updateLanguageSelector();
    },
    
    // Get translation
    t(key) {
        return translations[this.currentLang][key] || key;
    },
    
    // Update all page content
    updatePageContent() {
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = this.t(key);
            
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.placeholder = translation;
            } else {
                element.textContent = translation;
            }
        });
        
        // Update HTML attributes
        document.querySelectorAll('[data-i18n-html]').forEach(element => {
            const key = element.getAttribute('data-i18n-html');
            element.innerHTML = this.t(key);
        });
    },
    
    // Update language selector
    updateLanguageSelector() {
        const selector = document.getElementById('language-selector');
        if (selector) {
            selector.value = this.currentLang;
        }
    },
    
    // Initialize
    init() {
        this.currentLang = this.getLanguage();
        document.documentElement.lang = this.currentLang;
        
        // Wait for DOM to be ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                this.updatePageContent();
                this.updateLanguageSelector();
            });
        } else {
            this.updatePageContent();
            this.updateLanguageSelector();
        }
    }
};

// Initialize on load
LanguageManager.init();
